#!/bin/bash

set -e

if [ $# -eq 2 ]; then
  pushd ../run >/dev/null

  ../build/client 127.0.0.1 8000 $(( $RANDOM % 8000 + 4000 )) $1 $2

  popd >/dev/null
else
  printf "Usage: ./client-run <username> <password>\n" >&2
fi

# { echo "dev" & sleep 0.1; echo "pass"; } | ../build/stackoverflow 0</dev/stdin

# ../build/stackoverflow <<< $'dev\npass\n'

# (echo "dev\npass" | cat) | ./stackoverflow

# IMPORTANT: can send to stdin after a delay: https://unix.stackexchange.com/questions/48103/construct-a-command-by-putting-a-string-into-a-tty/48221 
# https://serverfault.com/questions/178457/can-i-send-some-text-to-the-stdin-of-an-active-process-running-in-a-screen-sessi?newreg=fcacf224486d42f88f27528374ad103e 
